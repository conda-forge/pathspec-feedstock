{% set version = "1.0.1" %}

package:
  name: pathspec
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/p/pathspec/pathspec-{{ version }}.tar.gz
  sha256: e2769b508d0dd47b09af6ee2c75b2744a2cb1f474ae4b1494fd6a1b7a841613c

build:
  noarch: python
  number: 0
  script:
    - {{ PYTHON }} -m pip install . --no-deps -vv --no-build-isolation --disable-pip-version-check

requirements:
  host:
    - flit-core >=3.2,<4
    - pip
    - python {{ python_min }}
  run:
    - python >={{ python_min }}

test:
  source_files:
    - tests
  requires:
    - pip
    - pytest
    - python {{ python_min }}
  imports:
    - pathspec
  commands:
    - pip check
    - cd tests
    - pytest -vv --tb=long --color=yes  # [unix]
    # skip symlink tests on windows
    # https://github.com/cpburnz/python-path-specification/commit/d268375a4c6aa
    - pytest -vv --tb=long --color=yes -k "not (2_1_check_realpath or 2_4_recursive_links or 2_5_recursive_circular_links)"  # [win]

about:
  home: https://github.com/cpburnz/python-path-specification
  license: MPL-2.0
  license_file: LICENSE
  summary: Utility library for gitignore style pattern matching of file paths.
  description: |
    pathspec is a utility library for pattern matching of file paths. So far
    this only includes Git's wildmatch pattern matching which itself is derived
    from Rsync's wildmatch. Git uses wildmatch for its gitignore files.
  doc_url: https://python-path-specification.readthedocs.io
  doc_source_url: https://github.com/cpburnz/python-path-specification/blob/master/doc/source/index.rst

extra:
  recipe-maintainers:
    - bollwyvl
    - proinsias
